---
layout: post
title: Linux磁盘分区
date: 2016-04-15
categories: blog
tags: [配置]
description: 磁盘分区
---

## 概念

电脑刚买来的时候，如果没有装系统（当然，现在一般都预装了），从头开始装系统的话，首先要做的就是磁盘分区。 分区是将一个硬盘驱动器分成若干个逻辑驱动器，分区是把硬盘连续的区块当做一个独立的磁硬使用。分区表是一个硬盘分区的索引，分区的信息都会写进分区表。简单地说就是把一块硬盘分成几个区域（当然是用软件，不是物理性的）

为何要分几个区？想象如果只有一个分区，那如果这个分区损坏了，所有数据就没了。如果分了至少一个区，损坏的就只是一个区的数据。有点风险共担的意思。其次据说能增加磁盘空间的使用效率，这个没学过，姑且相信吧。

分区工具：这里使用的是fdisk，终端输入`fdisk /dev/sdb`,即可进入编辑，注意，需要在有超级权限（所以说谨慎操作）才能操作，sdb指的是你希望分区的硬盘名字，我这里是虚拟机里的磁盘。

按照提示来就可以了，主要命令有这几个：

* p、打印分区表。（可以查看当前分区表情况）
* n、新建一个新分区。
* d、删除一个分区。
* q、退出不保存。

## 操作
输入n新建分区，会出现提示建立主分区还是扩展分区，这里想多说一点，主分区和扩展分区总共不能超过四个。输入P,选择主分区。输入1或者直接按enter默认就行。注意:图示为建立第二个主分区的（一样的）

**最后按w键保存退出**（很重要）

使用分区：使用硬盘之前必须进行格式化并且挂载。ext4为Linux磁盘默认最新格式。
```
mkfs.ext4 /dev/sdb1
mkfs.ext4 /dev/sdb2
```
创建挂载目录(这里将sdb1挂载为/分区，sdb2挂载为home分区)
```
mount /dev/sdb1 /mnt
mount /dev/sdb2 /mnt/home
```
## 其他

查看磁盘信息，df -h相当于windows打开文件资源管理器，可以看到各分区的大小，已用和可用空间、挂载点等

mount 挂载磁盘，挂载点如果不存在要新建。例子如上

